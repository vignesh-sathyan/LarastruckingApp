@model LarastruckingApp.ViewModel.Customer.CustomerQuotesViewModel
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12 col-md-12 mt-2">
        <div class="white-bg customFormWrap">
            <div class="col-md-12 mb-2">
                <strong> <span> Shipments | Shipment Details </span></strong>
            </div>
            <hr class="hr_add" />
            <strong> <span><h6>Shipment Route Details</h6></span></strong>
            <div class="customTableWrapper">
                <div id="">
                    <table id="tblShipmentRoute" class="table-bordered dataTable table-striped cf w-100">
                        <thead>
                            <tr>
                                <th width="5%"> </th>
                                <th width="5%"> No </th>
                                <th> PickUp Location </th>
                                <th> PickUp Date Time</th>
                                <th> Delivery Location </th>
                                <th> Delivery Date Time </th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.CutomerShipmentRoutesDetail.Count > 0)
                            {
                                foreach (var item in Model.CutomerShipmentRoutesDetail)
                                {
                                    <tr>
                                        <td> <input type="radio" name="radioShipmentRouteId" id="radioShipmentRouteId" value="@item.ShippingRoutesId" onchange="CheckRouteStops(@item.ShippingRoutesId)" /> </td>
                                        <td> @item.RouteOrder </td>
                                        <td> @item.PickupAddress </td>
                                        <td>  @string.Format("{0:MM/dd/yyyy HH:mm}", item.PickupDateTime)</td>
                                        <td>  @item.DeliveryAddress </td>
                                        <td> @string.Format("{0:MM/dd/yyyy HH:mm}", item.DeliveryDateTime) </td>
                                    </tr>
                                }
                            }

                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="icon-outer">
                        @{
                            bool isValid = false;
                            foreach (var status in Model.CustomerShipmentTrack.ShipmentStatusHistory)
                            {
                                if (isValid == false)
                                {
                                    <div class="icon-list">
                                        <img style="width:auto;" src="@status.ImageUrl" /><br />
                                        <label>@string.Format("{0:MM/dd/yyyy HH:mm}", status.DateTime)</label>
                                    </div>
                                    isValid = true;
                                }
                                else
                                {
                                    <div class="icon-list dots-img">
                                        <img style="margin-bottom:0px; " src="@Model.CustomerShipmentTrack.StatusDotPath" />

                                    </div>
                                    <div class="icon-list">
                                        <img style="width:auto;" src="@status.ImageUrl" /><br />
                                        <label>@string.Format("{0:MM/dd/yyyy HH:mm}", status.DateTime)</label>
                                    </div>
                                }


                            }
                            foreach (var status in Model.CustomerShipmentTrack.ShipmentStatusList)
                            {
                                <div class="icon-list dots-img"><img style="margin-bottom:0px;" src="@Model.CustomerShipmentTrack.StatusGrayDotPath" /></div>
                                <div class="icon-list">
                                    <img style="width:auto;" src="@status.GrayImageURL" />
                                </div>


                            }
                        }
                    </div>
                </div>
            </div>


            @*<hr class="hr_add" />*@
            <div id="dvShipmentFreigtDetails">
                <strong> <span> <h6>Shipment Freight Details </h6> </span></strong>
                <div class="customTableWrapper">
                    <div id="tblFreightDetailsTable">

                    </div>
                </div>
            </div>
            <hr />
            <form action="" method="post" enctype="multipart/form-data">
                <!--Row 1: Shipment Ref -->
                <div class="row">
                    <input type="hidden" id="hdShipmentId" name="hdShipmentId" value="0">
                    @*<div class="col-md-3">
                            <div class="form-group row">

                                <label class="col-sm-4 col-form-label" for="txtShipRefNo">Ship Ref No.</label>
                                <div class="col-sm-8">
                                    <input type="text" id="txtShipRefNo" class="form-control" readonly="readonly">
                                </div>
                            </div>
                        </div>*@

                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtAirWayBill">Air Waybill</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtAirWayBill" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtPurchaseDoc">Purchase Doc.</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtPurchaseDoc" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtCustomerPO">Customer PO</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtCustomerPO" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtOrderNo"> Order No</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtOrderNo" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>
                </div>

                <!--Row 2: Customer Ref -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtCustomerRef" title="Customer Reference">Customer Ref.</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtCustomerRef" title="Customer Reference" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtContainerNo">Container No.</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtContainerNo" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>


                </div>

                <!--Row 3: Pickup/Delivery/ Phone Location -->
                <div class="row">
                    <!--Row 3i: Pickup-->
                    <div class="col-md-6">
                        <div class="row">
                            <!--Pickup Location-->
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label" for="txtPickupLocation">Pickup Location</label>
                                    <div class="col-sm-10">
                                        <input type="text" id="txtPickupLocation" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Pickup Arrival-->
                            @*<div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="txtEstimatedPickupArrival">Arrival</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="txtEstimatedPickupArrival" class="form-control" readonly="readonly">
                                        </div>
                                    </div>
                                </div>*@

                            <!--Pickup Depart-->
                            @*<div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="txtEstimatedPickupDepart">Depart</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="txtEstimatedPickupDepart" class="form-control" readonly="readonly">
                                        </div>
                                    </div>
                                </div>*@

                            <!--Pickup Phone-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtPickupPhone">Pickup Phone</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtPickupPhone" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Pickup Extension-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtPickupExtension">Pickup Extension</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtPickupExtension" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Driver Actual Arrival At Pickup Point-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtActualPickupArrived">Pickup Arrival</label>
                                    <div class="col-sm-8">
                                        <input type="text"
                                               id="txtActualPickupArrived"
                                               required="required"
                                               disabled="disabled"
                                               placeholder="mm-dd-yyyy"
                                               name="txtActualPickupArrived"
                                               class="form-control"
                                               readonly="readonly" />

                                    </div>
                                </div>
                            </div>

                            <!--Driver Actual Departure From Pickup Point-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtActualPickupDepart">Pickup Depart</label>
                                    <div class="col-sm-8">
                                        <input type="text"
                                               id="txtActualPickupDepart"
                                               required="required"
                                               disabled="disabled"
                                               placeholder="mm-dd-yyyy"
                                               name="txtActualPickupDepart"
                                               class="form-control"
                                               readonly="readonly" />

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!--Row 3ii: Delivery-->
                    <div class="col-md-6">
                        <div class="row">
                            <!--Delivery Location-->
                            <div class="col-md-12">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label" for="txtDeliveryLocation">Delivery Location</label>
                                    <div class="col-sm-10">
                                        <input type="text" id="txtDeliveryLocation" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Delivery Arrival-->
                            @*<div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="txtEstimatedDeliveryArrival">Arrival</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="txtEstimatedDeliveryArrival" class="form-control" readonly="readonly">
                                        </div>
                                    </div>
                                </div>*@

                            <!--Delivery Depart-->
                            @*<div class="col-md-6">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="txtEstimatedDeliveryDepart">Depart</label>
                                        <div class="col-sm-8">
                                            <input type="text" id="txtEstimatedDeliveryDepart" class="form-control" readonly="readonly">
                                        </div>
                                    </div>
                                </div>*@

                            <!--Delivery Phone-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtDeliveryPhone">Delivery Phone</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtDeliveryPhone" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Delivery Extension-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtDeliveryExtension" title="Delivery Extension">Delivery Ext.</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtDeliveryExtension" title="Delivery Extension" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <!--Driver Actual Arrival At Delivery Point-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtActualDeliveryArrived">Delivery Arrival</label>
                                    <div class="col-sm-8">
                                        <input type="text"
                                               id="txtActualDeliveryArrived"
                                               required="required"
                                               disabled="disabled"
                                               placeholder="mm-dd-yyyy"
                                               name="txtActualDeliveryArrived"
                                               class="form-control"
                                               readonly="readonly" />


                                    </div>
                                </div>
                            </div>

                            <!--Driver Actual Departure From Delivery Point-->
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="txtActualDeliveryDepart">Delivery Depart</label>
                                    <div class="col-sm-8">
                                        <input type="text"
                                               id="txtActualDeliveryDepart"
                                               required="required"
                                               disabled="disabled"
                                               placeholder="mm-dd-yyyy"
                                               name="txtActualDeliveryDepart"
                                               class="form-control"
                                               readonly="readonly" />

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <!--Row 4: Temperature -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtReceiverName">Receiver Name</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtReceiverName" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtSign">Receiver Signature</label>
                            <div class="col-sm-8">
                                <img src="" id="txtSign" class="signaturePanel" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row" id="divProofOfTemp">
                    <div class="col-md-3">
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label" for="txtTempReq">Temp Required</label>
                            <div class="col-sm-8">
                                <input type="text" id="txtTempReq" class="form-control" readonly="readonly">
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3">
                    </div>

                    @*<div class="col-md-3">
                            <div class="form-group row">
                                <label class="col-sm-4 col-form-label" for="txtActualTemp">Latest Temp</label>
                                <div class="col-sm-5">
                                    <input type="text" data-required="required" id="txtActualTemp" class="form-control" readonly="readonly" onkeypress="return onlyNumeric(event);">
                                </div>
                                <div class="col-sm-3">
                                    <select id="ddlTemperatureUnit" class="form-control">
                                        <option selected="selected" value="F">F</option>
                                        <option value="C">C</option>
                                    </select>
                                </div>

                            </div>
                        </div>*@

                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="ddlCustomerShipmentStatus">Status</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtCustomerShipmentStatus" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group row">
                                    <label class="col-sm-4 col-form-label" for="ddlCustomerShipmentSubStatus">Sub-Status</label>
                                    <div class="col-sm-8">
                                        <input type="text" id="txtCustomerShipmentSubStatus" class="form-control" readonly="readonly">
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label" for="txtOtherReason">Description</label>
                                    <div class="col-sm-10">
                                        <input type="text"
                                               id="txtOtherReason"
                                               disabled="disabled"
                                               name="txtOtherReason"
                                               onkeypress="return onlyAlphanumeric(event)"
                                               class="form-control" />
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>

                <!--Row 6: Submit Button -->
                @*<hr>*@
                <div class="row">
                    <div class="col-md-6">
                        <legnd id="hdrDamgeFiles"><strong>Damaged Files</strong></legnd>
                        <table id="tblDamagedFiles" class="table-bordered dataTable table-striped cf w-100 tblcolourChange">
                            <thead>
                                <tr>
                                    <th> Description </th>
                                    <th>File Name </th>
                                    <th>Date & Time </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <legnd id="hdrProof"><strong>Proof Of Temperature Files</strong></legnd>
                        <table id="tblProofOfTemp" class="table-bordered dataTable table-striped cf w-100 tblcolourChange">
                            <thead>
                                <tr>
                                    <th>Actual Temp  </th>
                                    <th>File Name </th>
                                    <th>Date & Time </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="row" id="divAccessorialchargs">
                    <div class="col-md-4">
                        <h2 class="cardHeading" data-toggle="collapse" data-target="#divAccessorialcharg">
                            <span style="color:#007bff"><i class="fa fa-plus"></i> Accessorial Charges</span>
                        </h2>

                        <div id="divAccessorialcharg" class="collapse">
                            <table id="tblAccessorialFee" class="table-bordered dataTable table-striped cf w-100">
                                <thead>
                                    <tr>
                                        <th>Fee Type</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>


                    </div>
                </div>
                @*<hr />*@

                <div class="row">
                    <div class="col-md-12 text-right mb-8">
                        @Html.ActionLink("Close", "Dashboard", "Customer", null, new { @class = "btn outline-Btn" })
                    </div>
                </div>
            </form>
        </div>

    </div>
</div>

<div class="modal" role="dialog" id="divPopUpFreightDetails">
    <div class="modal-dialog modal-lg" role="popup">
        <div class="modal-content">
            @{ Html.RenderPartial("_prUpdateFreightDetails");}
        </div>

    </div>
</div>

<div class="modal" role="dialog" id="modalDocument">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header popup">
                <h6 class="modal-title">Document viewer</h6>
                <div color="white" class="col-md-6">
                    <h6>
                        <button type="button" class="edit_icon btnPrintImage">
                            <i class="fa fa-print"></i>
                        </button>
                        <button type="button" class="edit_icon btnPrintPdf">
                            <i class="fa fa-print"></i>
                        </button>
                    </h6>
                </div>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div id="divViewer">
                            Preview file here
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


@Scripts.Render("~/bundles/CustomerShipmentDetails")
@*<script src="~/CustomScript/customerJs/CustomerShipmentDetails.js"></script>*@
